#=---------------------------------------------------------------------------
# Makefile for Envenergy Broadway builds.
#
# @configure_input@
#=---------------------------------------------------------------------------


#=--------------------------------------------------------------------------=#
#=-                DO NOT CHANGE ANYTHING BELOW THIS LINE                  -=#
#=--------------------------------------------------------------------------=#
# NOTE: This section of the makefile is generated by update_makefile.py in   #
#       the root directory of the broadway source tree.  By doing this,      #
#       it is reasonable to keep the almost 200 makefiles in sync with any   #
#       required changes.  To change this section, modify update_makefile.py #
#       and rerun the update_makefiles script.                               #
#=--------------------------------------------------------------------------=#

srcdir = @srcdir@
top_srcdir = @top_srcdir@
include @BUILD_DIR@/Constants.make

#=--------------------------------------------------------------------------=#
#=-                DO NOT CHANGE ANYTHING ABOVE THIS LINE                  -=#
#=--------------------------------------------------------------------------=#


#=---------------------------------------------------------------------------
# Rule: do_makeall
#
#   Required.  Called by the top level makefile via 'Rules.make', or by a
#   call to 'make' in a subdirectory.  Feel free to add other targets here,
#   but you should leave the 'target', 'tools', 'tests' and 'doc' rules.

do_makeall: target tools tests doc


#=---------------------------------------------------------------------------
# Define your 'prelease(-d)' structure.  See 'config/Rules.make' for a
# discussion of these variables.

PRELEASE:=	broadway.core


#=---------------------------------------------------------------------------
# Include the main 'Rules' file where most of the work is done.  This must
# follow the 'do_makeall' rule and PRELEASE_XXX symbols.

include $(RULES_FILE)


#=---------------------------------------------------------------------------
# Use 'TARGETS' to define what you want built.

TARGETS:=	__init__.$(PYEXT) \
		_bounded_semaphore.$(PYEXT) \
		_condition.$(PYEXT) \
		_event.$(PYEXT) \
		_ppp.$(PYEXT) \
		_semaphore.$(PYEXT) \
		_singleton.$(PYEXT) \
		_thread.so \
		adapters.$(PYEXT) \
		batch.$(PYEXT) \
		certificate.$(PYEXT) \
		datetime.$(PYEXT) \
		debugging_locks.$(PYEXT) \
		deferred.$(PYEXT) \
		edtlib.$(PYEXT) \
		event.$(PYEXT) \
		ftplib.$(PYEXT) \
		htmlgen.$(PYEXT) \
		httplib.$(PYEXT) \
		ifconfig.$(PYEXT) \
		interfaces.$(PYEXT) \
		magnitude.$(PYEXT) \
		object.$(PYEXT) \
		persistent.$(PYEXT) \
		poll.$(PYEXT) \
		profiling.$(PYEXT) \
		rna.$(PYEXT) \
		rna_xml.$(PYEXT) \
		rzcache.$(PYEXT) \
		rzutils.$(PYEXT) \
		safe.$(PYEXT) \
		sched_heartbeat.$(PYEXT) \
		sgml_formatter.$(PYEXT) \
		smtplib.$(PYEXT) \
		socket.$(PYEXT) \
		socketmap.$(PYEXT) \
		stream.$(PYEXT) \
		thread.$(PYEXT) \
		thread_pool.$(PYEXT) \
		thread_queue.$(PYEXT) \
		threading.$(PYEXT) \
		tzinfo.$(PYEXT) \
		url.$(PYEXT) \
		urllib.$(PYEXT) \
		user.$(PYEXT) \
		user_definable.$(PYEXT) \
		utils.$(PYEXT) \
		xmlrpclib2.$(PYEXT)

_thread.so: _thread.o
	$(CC) $(LDFLAGS) -shared _thread.o -o $@  -lpthread -ldl -lrt

target: $(TARGETS)

#=---------------------------------------------------------------------------
# Use 'DOCUMENTATION' to define documentation that needs to be generated.

DOC:=

doc: $(DOC)


#=---------------------------------------------------------------------------
# Use 'TOOLS' to define utility programs.  Output from this rule will *not*
# be included in a 'prelease(-d)' invocation.

TOOLS:=

tools: $(TOOLS)


#=---------------------------------------------------------------------------
# Use 'TESTS' to define test programs.  Any programs here will also be
# invoked when 'make unittest' is run.  Output from this rule will *not*
# be included in a 'prelease(-d)' invocation.

TESTS:=	_etest_scheduler.$(PYEXT) \
	_test_RNA.$(PYEXT) \
	_test_case_bacnet.$(PYEXT) \
	_test_case_datetime.$(PYEXT) \
	_test_case_edtlib.$(PYEXT) \
	_test_case_enumerated_dictionary.$(PYEXT) \
	_test_case_httplib.$(PYEXT) \
	_test_case_lock_debugging.$(PYEXT) \
	_test_case_magnitude.$(PYEXT) \
	_test_case_persistent.$(PYEXT) \
	_test_case_reloadable_singleton.$(PYEXT) \
	_test_case_rna.$(PYEXT) \
	_test_case_security_rexec.$(PYEXT) \
	_test_case_security_rfunc.$(PYEXT) \
	_test_case_sgml_formatter.$(PYEXT) \
	_test_case_socket.$(PYEXT) \
	_test_case_stream.$(PYEXT) \
	_test_case_thread_pool.$(PYEXT) \
	_test_case_thread_queue.$(PYEXT) \
	_test_case_url.$(PYEXT) \
	_test_case_urllib.$(PYEXT) \
	_test_case_uuid.$(PYEXT) \
	_test_case_xmlrpclib2.$(PYEXT) \
	_test_log.$(PYEXT) \
	_test_test.$(PYEXT) \
	_test_threading_of_log.$(PYEXT)

tests: $(TESTS)


#=- EOF --------------------------------------------------------------------=#
